(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[144],{"5WY0":function(e,r,a){e.exports={main:"antd-pro-pages-user-register-main",getCaptcha:"antd-pro-pages-user-register-getCaptcha",submit:"antd-pro-pages-user-register-submit",login:"antd-pro-pages-user-register-login",error:"antd-pro-pages-user-register-error",success:"antd-pro-pages-user-register-success",warning:"antd-pro-pages-user-register-warning","progress-pass":"antd-pro-pages-user-register-progress-pass",progress:"antd-pro-pages-user-register-progress"}},Wf1u:function(e,r,a){"use strict";a.r(r);a("+L6B");var t,s,n,o,i=a("2/Rp"),l=(a("Q9mQ"),a("diRs")),c=(a("fOrg"),a("+KLJ")),d=(a("MXD1"),a("CFYs")),p=(a("miYZ"),a("tsqr")),m=a("MVZn"),g=a.n(m),u=a("lwsE"),h=a.n(u),f=a("W8MJ"),w=a.n(f),v=a("a1gu"),E=a.n(v),b=a("Nsbk"),y=a.n(b),P=a("7W2i"),M=a.n(P),k=(a("5NDa"),a("5rEg")),O=(a("OaEy"),a("2fM7")),F=(a("y8nQ"),a("Vl3Y")),N=a("q1tI"),S=a.n(N),C=a("MuoO"),W=a("LLXN"),j=a("usdK"),q=a("5WY0"),D=a.n(q),I=F["a"].Item,V=(O["a"].Option,k["a"].Group,{ok:S.a.createElement("div",{className:D.a.success},S.a.createElement(W["FormattedMessage"],{id:"validation.password.strength.strong"})),pass:S.a.createElement("div",{className:D.a.warning},S.a.createElement(W["FormattedMessage"],{id:"validation.password.strength.medium"})),poor:S.a.createElement("div",{className:D.a.error},S.a.createElement(W["FormattedMessage"],{id:"validation.password.strength.short"}))}),Y={ok:"success",pass:"normal",poor:"exception"},z=(t=Object(C["connect"])(function(e){var r=e.resetPwd,a=e.loading;return{resetPwd:r,submitting:a.effects["resetPwd/submit"]}}),s=F["a"].create(),t(n=s((o=function(e){function r(){var e,a;h()(this,r);for(var t=arguments.length,s=new Array(t),n=0;n<t;n++)s[n]=arguments[n];return a=E()(this,(e=y()(r)).call.apply(e,[this].concat(s))),a.state={confirmDirty:!1,visible:!1,help:""},a.getPasswordStatus=function(){var e=a.props.form,r=e.getFieldValue("newPassword");return r&&r.length>9?"ok":r&&r.length>5?"pass":"poor"},a.handleSubmit=function(e){e.preventDefault();var r=a.props,t=r.form,s=r.dispatch;t.validateFields({force:!0},function(e,r){e||s({type:"resetPwd/submit",payload:{data:g()({},r)},callBack:function(e){"OK"===e&&p["a"].success("\u5bc6\u7801\u91cd\u7f6e\u6210\u529f\uff0c\u8bf7\u91cd\u65b0\u767b\u5f55",function(){j["a"].push("/user/login")})}})})},a.checkConfirm=function(e,r,t){var s=a.props.form;r&&r!==s.getFieldValue("newPassword")?t(Object(W["formatMessage"])({id:"validation.password.twice"})):t()},a.checkPassword=function(e,r,t){var s=a.state,n=s.visible,o=s.confirmDirty;if(r)if(a.setState({help:""}),n||a.setState({visible:!!r}),r.length<6)t("error");else{var i=a.props.form;r&&o&&i.validateFields(["confirm"],{force:!0}),t()}else a.setState({help:Object(W["formatMessage"])({id:"validation.password.required"}),visible:!!r}),t("error")},a.renderPasswordProgress=function(){var e=a.props.form,r=e.getFieldValue("newPassword"),t=a.getPasswordStatus();return r&&r.length?S.a.createElement("div",{className:D.a["progress-".concat(t)]},S.a.createElement(d["a"],{status:Y[t],className:D.a.progress,strokeWidth:6,percent:10*r.length>100?100:10*r.length,showInfo:!1})):null},a.renderMessage=function(e){return S.a.createElement(c["a"],{style:{marginBottom:24},message:e,type:"error",showIcon:!0})},a}return M()(r,e),w()(r,[{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var e=this.props,r=e.form,a=e.submitting,t=e.resetPwd,s=r.getFieldDecorator,n=this.state,o=n.help,c=n.visible;return S.a.createElement("div",{className:D.a.main},S.a.createElement("h3",null,"\u91cd\u7f6e\u5bc6\u7801"),"OK"!==t.msg&&!a&&this.renderMessage(t.msg),S.a.createElement(F["a"],{onSubmit:this.handleSubmit},S.a.createElement(I,null,s("username",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"}]})(S.a.createElement(k["a"],{size:"large",placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"}))),S.a.createElement(I,{help:o},S.a.createElement(l["a"],{getPopupContainer:function(e){return e.parentNode},content:S.a.createElement("div",{style:{padding:"4px 0"}},V[this.getPasswordStatus()],this.renderPasswordProgress(),S.a.createElement("div",{style:{marginTop:10}},S.a.createElement(W["FormattedMessage"],{id:"validation.password.strength.msg"}))),overlayStyle:{width:240},placement:"right",visible:c},s("newPassword",{rules:[{validator:this.checkPassword}]})(S.a.createElement(k["a"],{size:"large",type:"password",placeholder:Object(W["formatMessage"])({id:"form.password.placeholder"})})))),S.a.createElement(I,null,s("confirmPassword",{rules:[{required:!0,message:Object(W["formatMessage"])({id:"validation.confirm-password.required"})},{validator:this.checkConfirm}]})(S.a.createElement(k["a"],{size:"large",type:"password",placeholder:Object(W["formatMessage"])({id:"form.confirm-password.placeholder"})}))),S.a.createElement(I,null,S.a.createElement(i["a"],{size:"large",loading:a,className:D.a.submit,type:"primary",htmlType:"submit",style:{width:"100%"}},"\u786e\u5b9a\u4fee\u6539"))))}}]),r}(N["Component"]),n=o))||n)||n);r["default"]=z}}]);